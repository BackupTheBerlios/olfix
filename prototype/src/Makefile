DESTDIR+=/opt/olfix
# OLFIXDEST=/home/jan/Development/OLFIX
OLFIXBIN=$(DESTDIR)/bin
OLFIXSRC=$(DESTDIR)/src/C
OLFIXINSTALL=$HOME/tmp
.PHONY : clean

CFLAGS=-Wall -I/usr/include/mysql
LDFLAGS=-L/usr/lib/mysql
LDLIBS=-lmysqlclient

PROGRAMS=ADMIN \
	 ARADD AR2ADD AR2UPD ARCHG ARCHGL ARCHK ARICHK ARDSP ARDSPL ARLSPK ARLST ARLSTL ARSRCH \
	 ATTBET \
	 BARADD BARCHG BARCHK BARDSP BARFND BARLST BETADD BETCHG BETDSP BETLST \
	 DBOKRPT DBCHK \
	 FAKTDSP \
	 FORADD FORCHK FORDSP FORLST \
	 FTGADD FTGADM FTGDSP FTGLIS FTGLST FTGUPD \
	 HBOKRPT \
	 INKADD INKRADD INKHDSP INKLST INKRLST \
	 KRESADD KRESCHK KRELST KRESLST KRESUPD \
	 KSTADD KSTCHK KSTDSP KSTLST KTOADD KTOCHG KTOCHK KTODSP KTOLST KTORPT KTOVIEW \
	 KUADD KUCHG KUCHK KUDSP KULST KUSRCH \
	 LEVADD LEVCHG LEVDSP LEVLST \
	 LEVPDSP LEVPLST \
	 LEVSADD LEVSDSP LEVSLST LEVVADD LEVVDSP LEVVLST \
	 LRESADD LRESRPT \
	 ORDADD ORDCHG ORDCHK ORDDSP ORDUPD \
	 ORDRADD ORDRCHG ORDRDSP ORDLST ORDLST2  ORADUPD ORDRUPD \
	 OLFIX \
	 PICKADD PICKDSP PICKLST PKDADD PKDDSP PKDLST PRGLST PRISUPD PRISDSP PRTAPI \
	 RGTADD RGTCHK RGTDEL RGTDSP RGTLST RPTCRE \
	 SIEEXPK SIEEXPR SIEEXPV SLPADD STYRMAN \
	 TXTADD TXTDEL TXTDSP TXTLST \
	 TRHDADD TRNSADD TRNSLST \
	 USERADD USERCHG USERDEL USERDSP USERLST \
	 VALADD VALCHG VALDEL VALDSP VALLST \
	 VERHDSP VERHLST VERUPD WKUDSP WRREC

build: $(addprefix $(OLFIXBIN)/,$(PROGRAMS))

clean: 
	@-rm $(addprefix $(OLFIXBIN)/,$(PROGRAMS))

$(OLFIXBIN)/%: $(OLFIXSRC)/%.c
	$(CC) $(CFLAGS) $(LDFLAGS) -o $@ $< $(LDLIBS)

#Fulregel f?r att bygga program enkelt
%: $(OLFIXBIN)/%
